(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,a){},16:function(t,e,a){},17:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(8),s=a.n(i),o=(a(15),a(2)),u=a(3),h=a(5),c=a(4),d=a(6),l=(a(16),a(0)),f=function(){function t(){Object(o.a)(this,t),this.currentState=Math.floor(2*Math.random()),this.total=0}return Object(u.a)(t,[{key:"setState",value:function(t){this.currentState=t,this.total+=t}}]),t}();function b(t,e){for(var a=new Array(e),n=0;n<e;n++)a[n]=new Array(t);return a}var p=function(){function t(e,a){Object(o.a)(this,t),this.width=e,this.height=a,this.currentBufferIndex=0,this.buffer=[b(e,a),b(e,a)],this.clear(),this.generation=0}return Object(u.a)(t,[{key:"getCells",value:function(){return this.buffer[this.currentBufferIndex]}},{key:"getGen",value:function(){return this.generation}},{key:"clear",value:function(){this.generation=0;for(var t=this.buffer[this.currentBufferIndex],e=0;e<this.height;e++)for(var a=0;a<this.width;a++)t[e][a]=new f,t[e][a].setState(0)}},{key:"buildGrid",value:function(){for(var t=this.buffer[this.currentBufferIndex],e=0;e<this.height;e++)for(var a=0;a<this.width;a++)t[e][a]=new f}},{key:"nextGen",value:function(){var t=0===this.currentBufferIndex?1:0,e=this.buffer[this.currentBufferIndex],a=this.buffer[t];function n(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{border:"zero"},r=0;if("wrap"===n.border){var i=a-1,s=a+1,o=t-1,u=t+1;i<0&&(i=this.height-1),s===this.height&&(s=0),o<0&&(o=this.width-1),u===this.width&&(u=0),r=e[i][o].currentState+e[i][t].currentState+e[i][u].currentState+e[a][o].currentState+e[a][u].currentState+e[s][o].currentState+e[s][t].currentState+e[s][u].currentState}else{if("zero"!==n.border)throw new Error("unknown border option"+n.border);for(var h=-1;h<=1;h++){var c=a+h;if(!(c<0||c===this.height))for(var d=-1;d<=1;d++){var l=t+d;l<0||l===this.width||(0===d&&0===h||(r+=e[c][l].currentState))}}}return r}for(var r=0;r<this.height;r++)for(var i=0;i<this.width;i++){var s=n.bind(this)(i,r),o=e[r][i].currentState;"undefined"===typeof a[r][i]&&(a[r][i]=new f),1===o?s<2||s>3?a[r][i].setState(0):a[r][i].setState(1):3===s?a[r][i].setState(1):a[r][i].setState(0)}this.currentBufferIndex=0===this.currentBufferIndex?1:0,this.generation++}}]),t}();function v(t,e,a){var n,r,i;if(0===e)n=r=i=a;else{var s=function(t,e,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+6*(e-t)*a:a<.5?e:a<2/3?t+(e-t)*(2/3-a)*6:t},o=a<.5?a*(1+e):a+e-a*e,u=2*a-o;n=s(u,o,t+1/3),r=s(u,o,t),i=s(u,o,t-1/3)}return[Math.round(255*n),Math.round(255*r),Math.round(255*i)]}var g=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(h.a)(this,Object(c.a)(e).call(this,t))).grid=new p(t.width,t.height),a.grid.buildGrid(),a.state={x:0,y:0,generation:a.grid.getGen()},a.heatmap=!1,a.stopRequested=!0,a.buttonText="Play",a.update=a.update.bind(Object(l.a)(Object(l.a)(a))),a.start=a.start.bind(Object(l.a)(Object(l.a)(a))),a.startOver=a.startOver.bind(Object(l.a)(Object(l.a)(a))),a.clear=a.clear.bind(Object(l.a)(Object(l.a)(a))),a.drawGrid=a.drawGrid.bind(Object(l.a)(Object(l.a)(a))),a.startButtonHandler=a.startButtonHandler.bind(Object(l.a)(Object(l.a)(a))),a.stopButtonHandler=a.stopButtonHandler.bind(Object(l.a)(Object(l.a)(a))),a.resetButtonHandler=a.resetButtonHandler.bind(Object(l.a)(Object(l.a)(a))),a.heatmapButtonHandler=a.heatmapButtonHandler.bind(Object(l.a)(Object(l.a)(a))),a.playbackButtonHandler=a.playbackButtonHandler.bind(Object(l.a)(Object(l.a)(a))),a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.drawGrid(),this.stopRequested||requestAnimationFrame(this.update)}},{key:"startOver",value:function(){this.grid=new p(this.props.width,this.props.height),this.grid.buildGrid(),this.setState({generation:this.grid.getGen()},function(){console.log(this.state.generation),requestAnimationFrame(this.update)})}},{key:"clear",value:function(){this.grid.clear(),this.drawGrid(),this.setState({generation:this.grid.getGen()}),this.stopRequested=!0}},{key:"drawGrid",value:function(){for(var t=0,e=this.props.width,a=this.props.height,n=this.grid.getCells(),r=this.refs.canvas.getContext("2d"),i=r.getImageData(0,0,e,a),s=0;s<a;s++)for(var o=0;o<e;o++){var u=n[s][o];u.total>t&&(t=u.total)}for(var h=0;h<a;h++)for(var c=0;c<e;c++){var d=4*(h*e+c),l=1===n[h][c].currentState?0:255,f=n[h][c].total/t,b=240*Math.abs(1-f),p=this.heatmap?v(b/360,1,.5):[l,l,l];i.data[d+0]=p[0],i.data[d+1]=p[1],i.data[d+2]=p[2],i.data[d+3]=255}r.putImageData(i,0,0)}},{key:"update",value:function(){this.drawGrid(),this.stopRequested||(this.grid.nextGen(),this.setState({generation:this.grid.getGen()}),requestAnimationFrame(this.update))}},{key:"start",value:function(){this.stopRequested&&(this.stopRequested=!1,requestAnimationFrame(this.update))}},{key:"startButtonHandler",value:function(t){t.preventDefault(),this.start()}},{key:"stopButtonHandler",value:function(t){t.preventDefault(),this.stopRequested=!0}},{key:"resetButtonHandler",value:function(t){t.preventDefault(),this.stopRequested=!0,this.startOver(),this.buttonText="Play"}},{key:"heatmapButtonHandler",value:function(t){t.preventDefault(),0!==this.state.generation&&(this.heatmap=!this.heatmap,this.stopRequested&&this.drawGrid())}},{key:"playbackButtonHandler",value:function(t){t.preventDefault(),this.stopRequested?(this.start(),this.buttonText="Pause"):(this.stopRequested=!0,this.buttonText="Play")}},{key:"render",value:function(){return r.a.createElement("div",{id:"gridCanvas",ref:"elem"},r.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height}),r.a.createElement("div",null,r.a.createElement("h3",null,"Generation: ",this.state.generation)),r.a.createElement("div",{id:"buttonContainer"},r.a.createElement("button",{onClick:this.playbackButtonHandler},r.a.createElement("span",null,this.buttonText)),r.a.createElement("button",{onClick:this.resetButtonHandler},r.a.createElement("span",null,"Reset")),r.a.createElement("button",{disabled:0===this.state.generation,onClick:this.heatmapButtonHandler},r.a.createElement("span",null,"Toggle Heatmap"))))}}]),e}(n.Component),m=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(h.a)(this,Object(c.a)(e).call(this,t))).state={COLS:500,ROWS:500},a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Conway's Game of Life"),r.a.createElement(g,{width:this.state.COLS,height:this.state.ROWS}))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,a){t.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.bb7bd0b9.chunk.js.map